---
tags:
  - "#api-integration"
  - "#database"
  - "#security"
  - "#travel-planning-ai-agent"
  - "#rag-based-itinerary-generation"
  - "#travel-advisory-api"
---
# 旅行プラン作成AIエージェントの要件定義

## 走り書きメモ

- 旅行プランを作成できるAIエージェント
	- MVP：
		- 到着日、出発日または、旅行日数を設定し、旅程を生成AI(RAG)で作成
	- 追加機能：
		- 移動時間も考慮
		- マップにピンと経路（またはピンを直線で結ぶ）を表示
		- Googleマップのリストから行きたい場所リストを取得できる
			- 初期画面はGoogleマップ埋め込みとリストを表示
		- Googleマップにエクスポートも可
		- Google Maps MCPサーバーがあればそれを使いたいかも
		- 治安など必要な情報も生成AIのRAGによって提供する
		- Googleカレンダーやnotionへの日程登録
		- リッチなUIあり

## 概要

このドキュメントは、AIを活用した旅行プラン作成エージェントの要件定義をまとめたものです。ユーザーが到着日・出発日または旅行日数を入力し、生成AI（RAG）を用いて旅程を生成するMVPを中心に、Googleマップとの連携、治安情報の提供、GoogleカレンダーやNotionへのエクスポート、リッチなUIを備えたアプリケーションを設計します。

## 1. MVP要件

### 1.1 ユーザー入力

- **機能**：ユーザーが旅行の開始日・終了日または旅行日数を入力できるフォームを提供。
- **詳細**：
  - 入力項目：開始日、終了日（または日数）、目的地（例：都市名）、好み（例：観光、グルメ、予算）。
  - 例：「2025年8月1日から3日間、東京で観光メインのプラン」。
- **技術**：
  - 動的な入力フォームを構築。

### 1.2 旅程生成（RAG）

- **機能**：Retrieval-Augmented Generation（RAG）を使用して、ユーザーの入力に基づく旅程を生成。
- **詳細**：
  - **Retrieval**：Google Places APIで観光地、レストラン、ホテルの情報を取得。Google Directions APIで移動時間を計算。
  - **Generation**：取得したデータを元に、言語モデルで自然言語の旅程を生成。
  - 例：「1日目：10:00-12:00 浅草寺訪問、12:30-13:30 雷門近くのレストランでランチ」。
- **技術**：
  - Google Places API：観光地の詳細情報（場所、営業時間、レビュー）。
  - Google Directions API：移動時間とルートの最適化。
  - 言語モデル：

## 2. 追加機能要件

### 2.1 Googleマップとの連携

- **マップ表示**：
  - Google Maps JavaScript APIで、旅程の観光地をピンで表示し、直線またはルートで結ぶ。
  - 初期画面にGoogleマップを埋め込み、ユーザーの選択した場所リストを表示。
- **Googleマップ保存リストの取得**：
  - 現状、Google Maps APIでユーザーの保存リスト（「行きたい場所」など）を直接取得する機能は存在しない。
  - 代替案：
    - ユーザーに手動で場所を入力してもらうフォームを提供。
    - Google My Mapsで作成したカスタムマップをKMLファイルでエクスポートし、アプリにアップロード。
    - 公開共有リストのURLを解析（非公式で不安定）。
- **Googleマップへのエクスポート**：
  - 旅程をKMLファイルとして出力し、ユーザーがGoogle My Mapsにインポート可能。
  - KMLファイルには、観光地の座標、名前、説明を含む。
- **Google Maps MCPサーバー**：
  - Model Context Protocol（MCP）サーバーを使用して、AIアシスタントがGoogle Maps APIにアクセス可能。
  - 例：GitHubのcablate/mcp-google-mapで提供されるMCPサーバーを利用。
  - ただし、直接Google Maps APIを使用する方がシンプルで実装しやすい可能性あり。

### 2.2 治安情報の提供

- **機能**：RAGを使用して、旅行先の治安情報を取得し、旅程に組み込む。
- **詳細**：
  - 例：「このエリアは夜間の外出に注意が必要」などのアドバイスを旅程に追加。
  - 情報源として、以下のAPIを活用：
    - **TuGo Travel Advisory API**：225カ国以上の旅行アドバイザリー、健康・安全情報。
    - **Travel Advisory API**：無料で使えるJSONベースのAPIで、国のリスク値を毎日更新。
    - **Riskline Alert API**：リアルタイムで災害や安全情報を通知。
- **技術**：
  - APIから取得したデータをRAGのRetrievalフェーズで使用。
  - 言語モデルで、取得した情報を自然言語でユーザーに提示。

### 2.3 GoogleカレンダーおよびNotionへの連携

- **Googleカレンダー**：
  - Google Calendar APIを使用して、旅程の各アクティビティをカレンダーイベントとして登録。
  - 例：「8月1日 10:00-12:00 浅草寺訪問」をイベントとして追加。
  - 認証：OAuth 2.0でユーザーのGoogleアカウントにアクセス。
- **Notion**：
  - Notion APIを使用して、旅程をNotionのページやデータベースにエクスポート。
  - 例：旅程をテーブル形式で保存し、場所、時間、メモを整理。
  - 認証：Notionのインテグレーショントークンを使用。

### 2.4 リッチなUI

- **機能**：直感的で視覚的に魅力的なユーザーインターフェースを提供。
- **詳細**：
  - ドラッグ＆ドロップで旅程を編集可能。
  - マップとリストがリアルタイムで同期。
  - レスポンシブデザインで、モバイルとデスクトップに対応。
- **技術**：

## 3. 技術スタック提案

以下の技術スタックを提案します：

| **カテゴリ** | **技術** | **用途** |
| --- | --- | --- |
| フロントエンド | Next.js,shadcn/ui | リッチなUI、インタラクティブなマップ表示 |
| バックエンド |  | APIエンドポイント、RAG処理 |
| AI（RAG） | [AI SDK](https://ai-sdk.dev/)変更も可 | 旅程生成、治安情報生成 |
| マップ | Google Maps JavaScript API, Places API, Directions API | マップ表示、場所情報、移動時間計算 |
| 安全情報 | TuGo API, Travel Advisory API | 旅行先の安全情報取得 |
| 外部連携 | Google Calendar API, Notion API | 旅程のエクスポート |
| データベース |  | ユーザー入力や旅程データの保存 |

## 4. 実装の考慮点

- **ユーザー入力の処理**：
  - ユーザーの好み（予算、興味、移動手段など）を詳細に入力できるフォームを設計。
  - 例：チェックボックスで「観光」「グルメ」「リラックス」を選択。
- **移動時間の最適化**：
  - Google Directions APIで、観光地間の移動時間を計算し、1日のスケジュールが現実的か検証。
  - 例：1日に詰め込みすぎないよう、移動時間30分以内の場所を優先。
- **スケーラビリティ**：
  - 複数のユーザーが同時に利用できるよう、バックエンドをスケーラブルに設計
- **認証とセキュリティ**：
  - GoogleやNotionのAPI使用時に、OAuth 2.0で安全な認証を確保。
  - ユーザーデータを暗号化して保存。

## 5. 次のステップ

- **プロトタイプ開発**：
  - MVPとして、シンプルなフォームとGoogle Places APIを使った旅程生成を実装。
  - 例：1日分の旅程を生成し、マップにピンを表示。
- **ユーザーテスト**：
  - 少数のユーザーにプロトタイプを試してもらい、UIや旅程の質を評価。
- **機能拡張**：
  - 治安情報やカレンダー連携を段階的に追加。
- **技術選定の最終決定**：
  - フロントエンド、AIモデルを選ぶ。

## 6. 参考資料

- Google Maps Platform Documentation
- TuGo Travel Advisory API
- Travel Advisory API
- Google Calendar API
- Notion API
